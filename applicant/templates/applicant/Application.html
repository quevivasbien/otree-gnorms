{% extends "global/Page.html" %}
{% load otree static %}

{% block styles %}

<link href="/static/global/custom.css" rel="stylesheet">

<style>
	img {
		width: 75%;
		max-width: 150px;
		display: block;
		margin-left: auto;
		margin-right: auto;
	}
	.input-hidden {
		position: absolute;
		left: -9999px;
	}
	input[type=radio]:checked + label>img {
		border: 1px solid blue;
		box-shadow: 0 0 3px 3px #3366ff;
	}

	.profile {
		background-color: #e1e1ea;
		margin: 10px 30px 10px 20px;
		padding: 20px 20px;
		text-align: center;
	}
</style>

{% endblock %}

{% block title %}
	Part 2 of 3 - Application
{% endblock %}

{% block content %}

<div id="treatment" style="display:none">{{ player.treatment }}</div>
<div id="gender" style="display:none">{{ player.gender }}</div>
<input type="hidden" id="id_avatar" name="avatar">
{{ form.avatar.errors }}

<div id="page1">
	<p>During the study all participants are represented by an avatar. The avatars were assigned based on the answers in the entry survey and automatically selected from a library of avatars. This way your anonymity is preserved. The avatar that was automatically selected to represent you is displayed below.</p>

	<img id="avatar_demo" src='' alt="Avatar option"><br>

	<button type="button" class="btn-primary btn" onclick="show('page2', 'page1')">Next</button>
</div>

<div id="page2" style="display:none">

	<p>Your job application portfolio is the <em>only</em> information that the employers will see.</p>

	{% if player.treatment != 2 %}<p>Your application portfolio consists of {% if player.treatment == 1 %}your avatar and {% endif %}your evaluation of your performance on the test you completed in Part 1. The employers <em>do not</em> see how many questions you answered correctly in Part 1.</p>

	{% else %}<p>Your application portfolio consists of your avatar, your performance on the ten "evaluation questions" from Part 1, and your evaluation of your performance on the test you completed in Part 1.</p>{% endif %}

	<p>A quick reminder: in Part 1, you correctly answered {{ player.eval_correct }} out of the 10 evaluation questions. Among 100 prior MTurkers who took the ASVAB test, your performance on the 10 evaluation questions is as good as or better than {{ better_than }} of them and worse than {{ worse_than }} of them.</p>

	<p>Click next to continue to the application questions.</p>

	<button type="button" class="btn-primary btn back" onclick="show('page1', 'page2')">Back</button>
	<button type="button" class="btn-primary btn next" onclick="show('page3', 'page2')">Next</button>
</div>

<div id="page3" style="display:none">

	<p>Answer the following questions, which will be shown to employers as part of your application portfolio. Each profile shown to employers will only include your response to <em>one</em> of the following three questions.</p>

	{% formfield player.self_eval label="Based on the information you received about other applicants' performance on the task, please indicate how well you think you performed on the cognitive ability test:" %}
	<br>
	<div class="form-group required">
		<p>On a scale from 0 (entirely disagree) to 100 (entirely agree), please indicate the extent to which you agree with each of the following three statements:</p>
		<p>I performed well on the test I took in part 1.</p>
		<div class="slider-container">
			<input id="agree0" type="hidden" name="self_eval_agree0" value="50">
		    <input id="rangeInput0" type="range" min="0" max="100" step="1" class="slider" oninput="amount0.value=rangeInput0.value; agree0.value=rangeInput0.value;"/>
				<input id="amount0" type="number" value="50" min="0" max="100" step="1" oninput="rangeInput0.value=amount0.value; agree0.value=amount0.value;" style="width: 60px;"/>
		</div>
		{{ form.self_eval_agree0.errors }}
		<p>Usually I am the best at what I do.</p>
		<div class="slider-container">
			<input id="agree1" type="hidden" name="self_eval_agree1" value="50">
		    <input id="rangeInput1" type="range" min="0" max="100" step="1" class="slider" oninput="amount1.value=rangeInput1.value; agree1.value=rangeInput1.value;"/>
				<input id="amount1" type="number" value="50" min="0" max="100" step="1" oninput="rangeInput1.value=amount1.value; agree1.value=amount1.value;" style="width: 60px;"/>
		</div>
		{{ form.self_eval_agree1.errors }}
		<p>I conduct all tasks assigned to me with the needed attention.</p>
		<div class="slider-container">
			<input id="agree2" type="hidden" name="self_eval_agree2" value="50">
		    <input id="rangeInput2" type="range" min="0" max="100" step="1" class="slider" oninput="amount2.value=rangeInput2.value; agree2.value=rangeInput2.value;"/>
				<input id="amount2" type="number" value="50" min="0" max="100" step="1" oninput="rangeInput2.value=amount2.value; agree2.value=amount2.value;" style="width: 62px;"/>
		</div>
		{{ form.self_eval_agree2.errors }}
	</div>
	<br>
	{% formfield player.self_eval_statement label="Please choose one of the following statements to accompany your application:" %}

	<button type="button" class="btn-primary btn back" onclick="show('page2', 'page3')">Back</button>
	<button type="button" class="btn-primary btn next" onclick="seeProfile()">Next</button>

</div>

<div id="page4" style="display:none">

	<p>Great! That's all the information needed for your application.</p>
	<p>Click "Next" to go to the next stage or "Back" to go back and edit your responses.</p>
	<button type="button" class="btn-primary btn back" onclick="show('page3', 'page4')">Back</button>
	<button class="btn-primary btn next">Next</button>

</div>

<p id="not-complete-error" style="color:red; display:none">Select one of the choices to continue.</p>

{% endblock %}

{% block scripts %}

<script src="/static/global/js/show.js"></script>
<script src="{% static 'applicant/js/applicationQuestions.js' %}"></script>
<script type="text/javascript">initiate()</script>

{% endblock %}
